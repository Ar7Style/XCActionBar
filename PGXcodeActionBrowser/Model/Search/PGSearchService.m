//
//  PGSearchService.m
//  XCActionBar
//
//  Created by Pedro Gomes on 11/03/2015.
//  Copyright (c) 2015 Pedro Gomes. All rights reserved.
//

#import "PGActionIndex.h"
#import "PGSearchService.h"

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
@interface PGSearchService ()

@property (nonatomic, weak) id<PGActionIndex> index;

@end

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
@implementation PGSearchService

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
- (instancetype)initWithIndex:(id<PGActionIndex>)index
{
    if((self = [super init])) {
        self.index = index;
    }
    return self;
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
- (void)performSearchWithQuery:(NSString *)expression completionHandler:(PGSearchServiceCompletionHandler)completionHandler
{
    NSParameterAssert(completionHandler);
    
    NSArray *results = [self.index lookup:expression];
    completionHandler(results ?: @[]);
    
    TRLog(@"<PerformSearchWithQuery>, <query=%@>, <results=%@>", expression, results);
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
- (void)interruptSearches
{
    
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
- (void)updateIndex:(id)index
{

}

@end
